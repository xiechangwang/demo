<!DOCType html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ffmpeg wasm截取视频帧功能</title>
    <style>
        input,label,p {font-size:16px}
        body {margin: 20px}
        @media (max-width: 700px) {input{display:block;margin-bottom:15px}}
    </style>
</head>
<body>
<form style="margin-bottom: 20px;">
    <p>请选择一个视频（本地操作不会上传）</p>
    <input type="file" required name="file">
    <label>时间(秒)</label><input type="number" step="1" value="0" required name="time">
    <input type="submit" value="获取图像" style="font-size:16px;">
</form>
<p id="text-tip">WASM下载解析中，请稍候。。。<br>（解析需约5s，手机上需要的时间较长，可先选择一个视频文件）</p>
<div id="error-tip"></div>
<canvas width="600" height="400" id="canvas"></canvas>
<script src="./js/canvas.js"></script>
<script>
!function() {
   let setFile = null;
   // WASM下载并解析完毕
   Module.onRuntimeInitialized = function () {
        console.log('WASM initialized done!');
        // 导出的核心处理函数
        setFile = Module.cwrap('setFile', 'number',
                      ['number', 'number', 'number']);
   };
}();
</script>
</body>
</html>
